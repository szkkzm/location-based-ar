<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name=”viewport” content=”width=device-width,initial-scale=1.0″>
    <title>GeoAR.js demo</title>
    <script src='https://aframe.io/releases/0.9.2/aframe.min.js'></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
    </script>
    
</head>

<body style='margin: 0; overflow: hidden;'>
    <a-scene
        vr-mode-ui="enabled: false"
		embedded
        arjs='sourceType: webcam; debugUIEnabled: false;'>
        <a-box id="box" color="red" rotation="0 45 45" position="50 40 0" scale="1 1 1"></a-box>
        <a-box color="yellow" position="0 0 -2" rotation="0 45 45" scale="1 1 1"></a-box>
        <a-camera gps-camera rotation-reader></a-camera>
	</a-scene>
</body>

<script type="text/javascript">

    var watchID;
  
    if (navigator.geolocation) {
  
      // 現在の位置情報を取得
      watchID = navigator.geolocation.watchPosition(
  
        // 位置情報の取得を成功した場合
        function (pos) {
          var location = "latitude: " + (pos.coords.latitude - 0.00001) + ";";
          location += " longitude: " + (pos.coords.longitude - 0.00001) + ";";
          document.getElementById("box").setAttribute("gps-entity-place", location);
        },
        null,
        { enableHighAccuracy: true }
      );
    } else {
      window.alert("本ブラウザではGeolocationが使えません");
    }
    function clearWatchPosition() {
      navigator.geolocation.clearWatch(watchID);
    }
  </script>